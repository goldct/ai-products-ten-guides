# AI智能体团队搭建完整指南

> 基于实战经验：从0到1搭建10人AI协作团队

---

## 📋 目录

1. [系统架构](#1-系统架构)
2. [分身角色定义](#2-分身角色定义)
3. [协作流程](#3-协作流程)
4. [部署与控制](#4-部署与控制)
5. [最佳实践](#5-最佳实践)
6. [常见问题](#6-常见问题)

---

## 1. 系统架构

### 1.1 核心概念

这是一个基于 Moltbot Gateway 的多智能体协作系统，通过"卦"（角色）实现专业化分工。

```
┌─────────────────────────────────────────┐
│           总控（乾）                      │
│      任务分发 + 质量方向把控              │
└────────────────┬────────────────────────┘
                 │
        ┌────────┴────────┐
        │                 │
   [产品开发]         [验收质检]  ←→ [宣发引流]
     坤/临               泰              否
```

### 1.2 技术栈

| 组件 | 技术 | 端口 |
|------|------|------|
| 主网关 | Moltbot Gateway | 18789 |
| 局域网关 | Moltbot Gateway | 18790 |
| 10个分身 | Moltbot Gateway | 18791-18800 |
| Web面板 | Node.js | 3999 |
| L3AGI协作 | Docker Compose | 3080 |

### 1.3 目录结构

```
clawdbot分身/
├── panel-web/          # Web控制面板
├── crewai/             # CrewAI协作框架
├── 甲/～/癸/            # 10个独立分身
├── 坤/临/泰/否/...     # 角色目录（对应64卦）
├── panel-full.sh       # 终端控制面板
├── workers.conf        # 分身配置
└── 创建54卦.sh         # 快速创建脚本
```

---

## 2. 分身角色定义

### 2.1 核心角色

#### 乾（总控）
- **职责**: 任务分发、质量方向把控、协调各方
- **能力**: 全局视角、决策判断、资源分配
- **使用场景**: 项目启动会、重大决策点

#### 坤（产品开发）
- **职责**: 产品方案、功能设计、需求文档
- **能力**: 需求分析、架构设计、文档输出
- **使用场景**: 产品规划、功能定义

#### 泰（验收质检）
- **职责**: 验收标准对齐、质量把控、问题发现
- **能力**: 标准制定、测试验证、风险识别
- **使用场景**: 交付前验收、质量检查

#### 否（宣发引流）
- **职责**: 产品宣发、账号运营、流量获取
- **能力**: 文案撰写、渠道运营、数据分析
- **使用场景**: 产品发布、营销活动

#### 临（产品与技术）
- **职责**: 产品方案 + 技术要点
- **能力**: 需求 + 实现，兼顾两者
- **使用场景**: 快速原型、技术验证

#### 谦（信息获取）
- **职责**: 信息爬取、数据收集、文本整理
- **能力**: 网络爬取、数据清洗、信息筛选
- **使用场景**: 市场调研、竞品分析

#### 观（调研选题）
- **职责**: 选题研究、趋势分析、创意发掘
- **能力**: 洞察判断、趋势预测、创意生成
- **使用场景**: 内容选题、产品方向

#### 随（视频制作）
- **职责**: 视频成片、剪辑制作、视觉呈现
- **能力**: 视频剪辑、特效制作、视觉优化
- **使用场景**: 短视频、宣传片

#### 豫（脚本策划）
- **职责**: 脚本写作、分镜设计、内容策划
- **能力**: 故事结构、镜头语言、节奏把控
- **使用场景**: 视频脚本、内容策划

#### 蛊（运营数据）
- **职责**: 运营管理、数据分析、复盘优化
- **能力**: 数据分析、SOP制定、流程优化
- **使用场景**: 运营复盘、数据监控

### 2.2 完整64卦映射

系统支持扩展到64个专业角色，可根据需要动态添加。

---

## 3. 协作流程

### 3.1 单项目流程

```
1. 乾开会 → 确定分工和顺序
2. 坤/临做产品 → 输出产品方案
3. 泰验收 → 对齐标准
4. 否做宣发 → 运营账号、引流
```

### 3.2 产线模式

#### 短视频生成产线
```
豫（脚本/分镜）→ 随（成片/剪辑）→ 否（宣发）
```

#### 文本获取产线
```
观（选题）→ 谦（信息爬取）→ 整理输出
```

#### 专门运营产线
```
蛊（数据/复盘）→ 否（宣发）
```

### 3.3 项目 vs 产线

| 特征 | 项目 | 产线 |
|------|------|------|
| 目标 | 完成特定项目 | 固定流程反复执行 |
| 组合 | 动态选卦 | 固定几个卦配合 |
| 灵活性 | 高，每项目定制 | 中，流程固定但内容可换 |
| 典型场景 | 新产品开发、复杂项目 | 内容生产、标准化流程 |

---

## 4. 部署与控制

### 4.1 快速启动

#### 方式A：Web控制面板（推荐）
```bash
cd /Users/gold/Desktop/clawdbot分身/panel-web
npm install && npm start
# 访问 http://localhost:3999
```

#### 方式B：终端控制面板
```bash
cd /Users/gold/Desktop/clawdbot分身
./panel-full.sh
```

### 4.2 常用命令

```bash
# 启动特定分身（如第1个"甲"）
./panel-full.sh start 1

# 开启分身TUI（终端对话）
./panel-full.sh tui 1

# 停止所有分身
./panel-full.sh stop all

# 查看所有状态
./panel-full.sh status
```

### 4.3 创建新分身

```bash
./创建54卦.sh  # 创建新角色
```

### 4.4 L3AGI 多智能体协作

```bash
cd /Users/gold/Desktop/clawdbot分身/team-of-ai-agents
docker-compose up --build
# 访问 http://localhost:3080
```

在L3AGI中创建Agent时，可在 **Configuration** 选择绑定的网关（主/LAN/甲～癸）。

---

## 5. 最佳实践

### 5.1 项目启动前的准备

1. **明确目标**: 用一句话描述项目目标
2. **选择角色**: 根据项目类型选择需要的卦
3. **确定流程**: 是单项目模式还是产线模式
4. **设定标准**: 泰制定验收标准

### 5.2 提升协作效率

1. **分工明确**: 每个卦的职责清晰，不重叠
2. **标准先行**: 验收标准在开始前就对齐
3. **文档驱动**: 所有关键决策和产出都记录文档
4. **迭代优化**: 定期复盘，优化协作流程

### 5.3 成本控制

1. **共用API Key**: 10个分身共享智谱key，降低成本
2. **上下文剪裁**: 启用 contextPruning/compaction 防爆窗
3. **按需启动**: 不用时分身可停止，节省资源
4. **本地优先**: 能用本地工具就不用外部API

### 5.4 常见协作模式

#### 模式1：快速验证
```
观（快速调研）→ 临（产品原型）→ 泰（验证）
```

#### 模式2：内容生产
```
观（选题）→ 豫（脚本）→ 随（成片）→ 否（宣发）
```

#### 模式3：产品开发
```
乾（总控）→ 坤（产品）→ 临（技术）→ 泰（验收）→ 否（宣发）
```

---

## 6. 常见问题

### Q1: 如何选择合适的卦组合？

**答**: 根据项目阶段和类型：
- **前期调研**: 观 + 谦
- **产品定义**: 坤 + 临 + 泰
- **内容生产**: 豫 + 随 + 否
- **完整项目**: 乾 + 坤 + 临 + 泰 + 否

### Q2: Web面板和终端面板哪个更好？

**答**:
- **Web面板**: 视觉直观，支持一键操作，适合日常管理
- **终端面板**: 更快更轻量，适合快速批量操作
- **推荐**: 日常用Web，脚本/自动化用终端

### Q3: 分身之间如何共享记忆？

**答**:
- **方案1**: 使用 Aegis Memory（见 `repos/agent记忆共享说明.md`）
- **方案2**: 通过乾协调，乾负责信息同步
- **方案3**: 使用外部知识库/数据库

### Q4: 如何扩展到更多分身？

**答**:
1. 修改 `workers.conf` 添加新配置
2. 运行 `./创建54卦.sh` 创建新角色
3. 更新 Web面板配置（如需要）
4. 重新启动服务

### Q5: 如何监控分身性能？

**答**:
- Web面板实时显示状态
- 各分身的 `session_status` 命令查看详情
- 日志文件在分身目录下

### Q6: 网络工具不可用时怎么办？

**答**:
1. 使用本地文件分析和整理
2. 手动收集数据后让AI分析
3. 创建可复用的本地工具
4. 修复 Moltbot gateway 服务（`moltbot gateway restart`）

### Q7: 如何对接飞书/微信等平台？

**答**:
- **飞书**: 使用 `agent_chat_wechat` 或 `ChatGPT-Agents-for_Feishu-Dingtalk`
- **微信**: 使用 `wechat-bot` 或 `agent_chat_wechat`
- **原理**: 桥接网关API与平台机器人接口

---

## 附录：相关资源

### 官方文档
- Moltbot: https://docs.molt.bot
- Moltbot GitHub: https://github.com/moltbot/moltbot

### 推荐开源项目
- L3AGI: https://github.com/l3vels/team-of-ai-agents
- AgentScope: https://github.com/modelscope/agentscope
- agent_chat_wechat: https://github.com/panxingfeng/agent_chat_wechat

### 社区
- ClawdHub: https://clawdhub.com
- Discord: https://discord.com/invite/clawd

---

## 总结

这套系统的核心价值在于：
1. **专业化分工**: 每个卦专注自己的领域
2. **灵活组合**: 可根据项目需要动态组合
3. **规模化**: 支持64个角色，可应对各种场景
4. **成本可控**: 共享资源，按需使用

从0到1搭建一个10人AI团队，关键在于：
- 明确每个角色的定位
- 设计清晰的协作流程
- 选择合适的控制工具
- 持续优化和迭代

祝你的AI团队协作顺利！🚀
